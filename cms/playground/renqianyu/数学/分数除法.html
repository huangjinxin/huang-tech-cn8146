<!DOCTYPE html>
<html lang="zh-CN">
<head>
<meta charset="UTF-8">
<title>åˆ†æ•°é™¤æ³•å­¦ä¹ å·¥å…·</title>
<style>
    /* ---------- å…¨å±€æ ·å¼ ---------- */
    body {
        margin: 0;
        font-family: "Segoe UI", "Helvetica Neue", Arial, sans-serif;
        background: #f0f4f8;
        color: #333;
        line-height: 1.6;
    }
    h1, h2 {
        color: #2c3e50;
    }
    a { color: #2980b9; text-decoration: none; }
    a:hover { text-decoration: underline; }

    /* ---------- å®¹å™¨ ---------- */
    .container {
        max-width: 960px;
        margin: 0 auto;
        padding: 20px;
    }

    /* ---------- å¡ç‰‡ ---------- */
    .card {
        background: #fff;
        border-radius: 8px;
        box-shadow: 0 4px 12px rgba(0,0,0,.08);
        padding: 20px;
        margin-bottom: 30px;
    }

    /* ---------- æ•™å­¦æ–‡å­— ---------- */
    .intro p {
        text-indent: 2em;
        margin: 0 0 1em;
    }
    .step {
        margin-left: 1.5em;
        padding-left: .5em;
        border-left: 3px solid #3498db;
        margin-bottom: .8em;
    }

    /* ---------- è®¡ç®—å™¨ ---------- */
    .calculator input[type="number"] {
        width: 70px;
        padding: 6px;
        margin: 0 4px;
        border: 1px solid #bdc3c7;
        border-radius: 4px;
        text-align: center;
    }
    .calculator button {
        background: #27ae60;
        color: #fff;
        border: none;
        border-radius: 4px;
        padding: 8px 12px;
        cursor: pointer;
        transition: background .2s;
    }
    .calculator button:hover {
        background: #219150;
    }
    .result {
        margin-top: 12px;
        font-weight: bold;
        color: #c0392b;
    }

    /* ---------- ç»ƒä¹ é¢˜ ---------- */
    .quiz .question {
        font-size: 1.1em;
        margin-bottom: .8em;
    }
    .quiz input[type="text"] {
        width: 80px;
        padding: 4px 6px;
        border: 1px solid #95a5a6;
        border-radius: 4px;
        text-align: center;
    }
    .quiz button {
        background: #2980b9;
        color: #fff;
        border: none;
        border-radius: 4px;
        padding: 6px 10px;
        cursor: pointer;
        margin-left: 8px;
        transition: background .2s;
    }
    .quiz button:hover {
        background: #2472a4;
    }
    .feedback {
        margin-top: 8px;
        font-weight: bold;
    }
    .feedback.correct { color: #27ae60; }
    .feedback.wrong   { color: #e74c3c; }

    /* ---------- å“åº”å¼ ---------- */
    @media (max-width: 600px) {
        .calculator input[type="number"] { width: 55px; }
        .quiz input[type="text"] { width: 60px; }
    }
</style>
</head>
<body>

<div class="container">

    <!-- 1ï¸âƒ£ æ ‡é¢˜ -->
    <h1>ğŸ“š åˆ†æ•°é™¤æ³•å­¦ä¹ å·¥å…·</h1>

    <!-- 2ï¸âƒ£ æ•™å­¦æ–‡å­— -->
    <section class="card intro">
        <h2>ğŸ” ä»€ä¹ˆæ˜¯åˆ†æ•°é™¤æ³•ï¼Ÿ</h2>
        <p>åˆ†æ•°é™¤æ³•å…¶å®ç­‰ä»·äºæŠŠç¬¬ä¸€ä¸ªåˆ†æ•°ï¼ˆè¢«é™¤æ•°ï¼‰ä¹˜ä»¥ç¬¬äºŒä¸ªåˆ†æ•°ï¼ˆé™¤æ•°ï¼‰çš„å€’æ•°ã€‚</p>
        <div class="step"><strong>æ­¥éª¤ä¸€ï¼š</strong>å†™å‡ºé™¤æ•°çš„å€’æ•°ï¼ˆå³æŠŠåˆ†å­åˆ†æ¯äº’æ¢ï¼‰ã€‚</div>
        <div class="step"><strong>æ­¥éª¤äºŒï¼š</strong>æŠŠè¢«é™¤æ•°å’Œå€’æ•°ç›¸ä¹˜ã€‚</div>
        <div class="step"><strong>æ­¥éª¤ä¸‰ï¼š</strong>çº¦åˆ†ï¼Œå¾—åˆ°æœ€ç®€ç»“æœã€‚</div>
        <p>è®°ä½ï¼š<em>â€œé™¤ä»¥æŸä¸ªæ•° = ä¹˜ä»¥è¯¥æ•°çš„å€’æ•°â€</em>ï¼Œè¿™æ˜¯åˆ†æ•°é™¤æ³•å”¯ä¸€éœ€è¦æŒæ¡çš„å…³é”®ç‚¹ã€‚</p>

        <h3>âš¡ ä¾‹å­æ¼”ç¤º</h3>
        <p>æŠŠ <code>3/4 Ã· 2/5</code> è¿›è¡Œè¿ç®—ï¼š</p>
        <ol>
            <li>å€’æ•°ï¼š<code>2/5 â†’ 5/2</code></li>
            <li>ç›¸ä¹˜ï¼š<code>3/4 Ã— 5/2 = 15/8</code></li>
            <li>çº¦åˆ†ï¼š<code>15/8</code> å·²ç»æ˜¯æœ€ç®€å½¢å¼ã€‚</li>
        </ol>
        <p>äºæ˜¯ <code>3/4 Ã· 2/5 = 15/8</code>ï¼ˆäº¦å¯å†™æˆ <code>1 7/8</code>ï¼‰ã€‚</p>
    </section>

    <!-- 3ï¸âƒ£ äº¤äº’å¼è®¡ç®—å™¨ -->
    <section class="card calculator">
        <h2>ğŸ§® åˆ†æ•°é™¤æ³•è®¡ç®—å™¨</h2>
        <p>è¾“å…¥ä¸¤ä¸ªåˆ†æ•°ï¼Œç‚¹å‡»ã€Œè®¡ç®—ã€å³å¾—ç»“æœï¼ˆè‡ªåŠ¨çº¦åˆ†ï¼‰ã€‚</p>
        <div>
            <label>è¢«é™¤æ•°&nbsp;
                <input type="number" id="num1" placeholder="åˆ†å­" min="0">
                /
                <input type="number" id="den1" placeholder="åˆ†æ¯" min="1">
            </label>
            &nbsp;&nbsp;Ã·&nbsp;&nbsp;
            <label>é™¤æ•°&nbsp;
                <input type="number" id="num2" placeholder="åˆ†å­" min="0">
                /
                <input type="number" id="den2" placeholder="åˆ†æ¯" min="1">
            </label>
            <button id="calcBtn">è®¡ç®—</button>
        </div>
        <div class="result" id="calcResult"></div>
    </section>

    <!-- 4ï¸âƒ£ ç»ƒä¹ é¢˜ -->
    <section class="card quiz">
        <h2>âœï¸ è¯¾å ‚ç»ƒä¹ </h2>
        <p>ç³»ç»Ÿä¼šéšæœºç”Ÿæˆä¸€é“åˆ†æ•°é™¤æ³•é¢˜ï¼Œè¾“å…¥ä½ çš„ç­”æ¡ˆåç‚¹å‡»ã€Œæ£€æŸ¥ã€ã€‚</p>
        <div class="question" id="quizQuestion"></div>
        <input type="text" id="quizAnswer" placeholder="å¦‚ 3/5">
        <button id="checkBtn">æ£€æŸ¥</button>
        <div class="feedback" id="quizFeedback"></div>
    </section>

</div>

<script>
/* ---------- å·¥å…·å‡½æ•° ---------- */
// æ±‚æœ€å¤§å…¬çº¦æ•°ï¼ˆæ¬§å‡ é‡Œå¾—ç®—æ³•ï¼‰
function gcd(a, b) {
    while (b !== 0) {
        let t = b;
        b = a % b;
        a = t;
    }
    return Math.abs(a);
}
// å°†åˆ†æ•°çº¦åˆ†æˆæœ€ç®€å½¢å¼
function simplify(num, den) {
    if (den === 0) return [num, den];
    const g = gcd(num, den);
    return [num / g, den / g];
}
// æŠŠåˆ†æ•°è½¬æˆå­—ç¬¦ä¸²ï¼ˆå¸¦è´Ÿå·ã€å¸¦æ•´æ•°éƒ¨åˆ†ï¼‰
function fractionToString(num, den) {
    if (den === 0) return "æœªå®šä¹‰ (åˆ†æ¯ä¸º0)";
    const sign = (num * den < 0) ? "-" : "";
    num = Math.abs(num);
    den = Math.abs(den);
    const [n, d] = simplify(num, den);
    if (n % d === 0) return sign + (n / d);
    if (n > d) {
        const intPart = Math.floor(n / d);
        const newNum = n % d;
        return sign + intPart + " " + newNum + "/" + d;
    }
    return sign + n + "/" + d;
}

/* ---------- è®¡ç®—å™¨ ---------- */
document.getElementById('calcBtn').addEventListener('click', function () {
    const n1 = parseInt(document.getElementById('num1').value, 10);
    const d1 = parseInt(document.getElementById('den1').value, 10);
    const n2 = parseInt(document.getElementById('num2').value, 10);
    const d2 = parseInt(document.getElementById('den2').value, 10);

    if (isNaN(n1) || isNaN(d1) || isNaN(n2) || isNaN(d2) ||
        d1 === 0 || d2 === 0) {
        document.getElementById('calcResult').textContent = "è¯·è¾“å…¥åˆæ³•çš„åˆ†æ•°ï¼ˆåˆ†æ¯ä¸èƒ½ä¸º 0ï¼‰ï¼";
        return;
    }

    // é™¤ä»¥ n2/d2 ç›¸å½“äºä¹˜ä»¥ d2/n2
    const resultNum = n1 * d2;
    const resultDen = d1 * n2;
    const [sn, sd] = simplify(resultNum, resultDen);
    const resultStr = fractionToString(sn, sd);
    document.getElementById('calcResult').textContent = `${n1}/${d1} Ã· ${n2}/${d2} = ${resultStr}`;
});

/* ---------- ç»ƒä¹ é¢˜ ---------- */
let currentQuiz = {};

function generateQuiz() {
    // éšæœºç”Ÿæˆä¸¤ä¸ªæ­£åˆ†æ•°ï¼Œåˆ†å­ã€åˆ†æ¯èŒƒå›´ 1~9
    const aNum = Math.floor(Math.random() * 9) + 1;
    const aDen = Math.floor(Math.random() * 9) + 1;
    const bNum = Math.floor(Math.random() * 9) + 1;
    const bDen = Math.floor(Math.random() * 9) + 1;

    currentQuiz = {
        aNum, aDen, bNum, bDen,
        // æ­£ç¡®ç­”æ¡ˆï¼ˆçº¦åˆ†åï¼‰
        answer: simplify(aNum * bDen, aDen * bNum)
    };
    document.getElementById('quizQuestion').innerHTML =
        `æ±‚ <strong>${aNum}/${aDen} Ã· ${bNum}/${bDen}</strong> çš„æœ€ç®€ç»“æœï¼š`;
    document.getElementById('quizAnswer').value = "";
    document.getElementById('quizFeedback').textContent = "";
}

document.getElementById('checkBtn').addEventListener('click', function () {
    const userInput = document.getElementById('quizAnswer').value.trim();
    if (!userInput) {
        alert('è¯·å…ˆå¡«å†™ç­”æ¡ˆï¼');
        return;
    }

    // è§£æç”¨æˆ·ç­”æ¡ˆï¼Œæ”¯æŒ â€œæ•´æ•°â€â€œa/bâ€â€œc d/eâ€
    let userNum, userDen;
    const mixed = userInput.match(/^(\d+)\s+(\d+)\/(\d+)$/); // ä¾‹ï¼š 1 2/3
    if (mixed) {
        const intPart = parseInt(mixed[1],10);
        const n = parseInt(mixed[2],10);
        const d = parseInt(mixed[3],10);
        userNum = intPart * d + n;
        userDen = d;
    } else if (userInput.includes('/')) {
        const parts = userInput.split('/');
        userNum = parseInt(parts[0],10);
        userDen = parseInt(parts[1],10);
    } else {
        // çº¯æ•´æ•°
        userNum = parseInt(userInput,10);
        userDen = 1;
    }

    if (isNaN(userNum) || isNaN(userDen) || userDen===0) {
        document.getElementById('quizFeedback').className = 'feedback wrong';
        document.getElementById('quizFeedback').textContent = "ç­”æ¡ˆæ ¼å¼ä¸æ­£ç¡®ï¼Œè¯·ä½¿ç”¨æ•´æ•°æˆ–åˆ†æ•°å½¢å¼ï¼ˆå¦‚ 3/5ã€2 1/4ï¼‰ã€‚";
        return;
    }

    const [uNum, uDen] = simplify(userNum, userDen);
    const [cNum, cDen] = currentQuiz.answer;

    const feedbackEl = document.getElementById('quizFeedback');
    if (uNum === cNum && uDen === cDen) {
        feedbackEl.className = 'feedback correct';
        feedbackEl.textContent = "âœ… æ­£ç¡®ï¼å¾ˆå¥½ï¼";
    } else {
        feedbackEl.className = 'feedback wrong';
        feedbackEl.textContent = `âŒ é”™è¯¯ï¼æ­£ç¡®ç­”æ¡ˆæ˜¯ ${fractionToString(cNum, cDen)}ã€‚`;
    }
    // ç”Ÿæˆä¸‹ä¸€é¢˜
    setTimeout(generateQuiz, 2000);
});

// åˆå§‹åŒ–ç¬¬ä¸€é¢˜
generateQuiz();

</script>
</body>
</html>