<!DOCTYPE html>
<html lang="zh">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>æ±Ÿæ¹–å¯¹å†³ - ä¹”å³°æŒ‘æˆ˜äº”å…³</title>
  <style>
    body {
      margin: 0;
      font-family: "åæ–‡è¡Œæ¥·", cursive;
      background: url('https://images.pexels.com/photos/3395163/pexels-photo-3395163.jpeg') no-repeat center center/cover;
      background-size: cover;
      color: #ffffff;
      display: flex;
      justify-content: center;
      align-items: center;
      height: 100vh;
      flex-direction: column;
      overflow: hidden;
      text-align: center;
    }

    h1 {
      font-size: 3em;
      margin-bottom: 20px;
      text-shadow: 2px 2px #000000;
    }

    .current-level {
      margin-bottom: 15px;
      font-size: 1.8em;
      color: #ac56ff;
      text-shadow: 2px 2px #000000;
      font-weight: bold;
    }

    .game-container {
      width: 600px;
      height: 400px;
      background-color: rgba(255, 255, 255, 0.1);
      border-radius: 15px;
      box-shadow: 0 0 20px rgba(0,0,0,0.3);
      display: flex;
      flex-direction: column;
      justify-content: center;
      align-items: center;
      position: relative;
      overflow: hidden;
      backdrop-filter: blur(5px);
      padding: 20px;
    }

    .player, .enemy {
      width: 250px;
      height: 100px;
      background-color: #00FF00;
      border-radius: 10px;
      box-shadow: 0 0 15px #00FF00;
      position: absolute;
      top: 20px;
      display: flex;
      justify-content: center;
      align-items: center;
      color: black;
      font-weight: bold;
      font-size: 1.5em;
      overflow: hidden;
      text-shadow: 1px 1px #000000;
    }

    .player {
      left: 0;
      background-color: #00cc00;
      box-shadow: 0 0 15px #00ff00;
    }

    .enemy {
      right: 0;
      background-color: #8A2BE2;
      box-shadow: 0 0 15px #3a003a;
    }

    .status-display {
      margin-top: 10px;
      font-size: 1.5em;
      font-weight: bold;
      text-shadow: 2px 2px #000000;
      transition: color 0.5s ease;
    }

    @keyframes pulse {
      0% { transform: scale(1); }
      50% { transform: scale(1.05); }
      100% { transform: scale(1); }
    }

    .status-display {
      animation: pulse 0.4s infinite;
    }

    .button-container {
      margin-top: 20px;
      display: flex;
      justify-content: center;
      gap: 10px;
    }

    .attack-btn, .heal-btn {
      padding: 12px 24px;
      font-size: 1.2em;
      background-color: #FFA500;
      border: none;
      border-radius: 10px;
      color: white;
      cursor: pointer;
      box-shadow: 0 0 8px #FF8C00;
      transition: all 0.2s ease;
      text-shadow: 1px 1px #000000;
    }

    .attack-btn:hover,
    .heal-btn:hover {
      background-color: #FF8C00;
      transform: scale(1.1);
    }

    .enemy-stats {
      margin-top: 10px;
      font-size: 1.3em;
      font-weight: bold;
      text-shadow: 1px 1px #000000;
      color: #0066ff;
    }

    .result {
      margin-top: 20px;
      font-size: 1.5em;
      font-weight: bold;
      text-shadow: 1px 1px #000000;
    }

    .fade-out {
      animation: fadeOut 0.8s ease-in;
    }

    @keyframes fadeOut {
      from { opacity: 1; }
      to { opacity: 0; }
    }

    @media (max-width: 600px) {
      .button-container {
        flex-direction: column;
        align-items: center;
      }

      .attack-btn, .heal-btn {
        width: 80%;
        margin: 10px auto;
      }
    }
  </style>
</head>
<body>

  <h1>æ±Ÿæ¹–å¯¹å†³ - ä¹”å³°æŒ‘æˆ˜äº”å…³</h1>
  <div class="current-level" id="currentLevel">ç¬¬ 1 å…³</div>
  <div class="game-container" id="gameContainer">
    <div class="player" id="player">ä¹”å³°</div>
    <div class="enemy" id="enemy">ä¸æ˜¥ç§‹ï¼š100</div>
    <div class="status-display" id="statusDisplay">
      ä¹”å³°ï¼š100/100
    </div>
    <div class="enemy-stats" id="enemyStats">æ•Œäººæˆ˜æ–—å€¼ï¼š10-11</div>
    <div class="button-container">
      <button class="attack-btn" id="attackBtn" onclick="attack('high')">é™é¾™åå…«æŒï¼ˆâ†‘ï¼‰<br><small>æ”»å‡»èŒƒå›´ï¼š20-25</small></button>
      <button class="heal-btn" id="healBtn" onclick="heal()">è¿åŠŸå›è¡€ï¼ˆâ†“ï¼‰<br><small>å›è¡€èŒƒå›´ï¼š20-25</small></button>
    </div>
    <div class="result" id="result"></div>
  </div>

  <script>
    let playerHealth = 100;
    let enemyHealth = 100; // ç¬¬1å…³é»˜è®¤100
    let isPlayerTurn = true;
    let isGameOver = false;
    let level = 1;

    const badNames = [
      "ä¸æ˜¥ç§‹",
      "æ…•å®¹å¤",
      "æ®µå»¶åº†",
      "å¤©å±±ç«¥å§¥",
      "å—æµ·é³„å²›æ•™ä¸»"
    ];

    const playerBox = document.getElementById('player');
    const enemyBox = document.getElementById('enemy');
    const result = document.getElementById('result');
    const attackBtn = document.getElementById('attackBtn');
    const healBtn = document.getElementById('healBtn');
    const statusDisplay = document.getElementById('statusDisplay');
    const currentLevel = document.getElementById('currentLevel');
    const enemyStats = document.getElementById('enemyStats');

    const keyMap = {
      'ArrowUp': 'high',
      'ArrowDown': 'heal'
    };

    function getAttackRange() {
      const base = 20;
      let increase = level >= 2 ? 1 : 0;
      increase = level >= 3 ? 2 : increase;
      increase = level >= 4 ? 3 : increase;
      increase = level >= 5 ? 5 : increase;
      return [base + increase, 25];
    }

    function updateAttackButton() {
      const [min, max] = getAttackRange();
      attackBtn.innerHTML = `é™é¾™åå…«æŒï¼ˆâ†‘ï¼‰<br><small>æ”»å‡»èŒƒå›´ï¼š${min}-${max}</small>`;
      healBtn.innerHTML = `è¿åŠŸå›è¡€ï¼ˆâ†“ï¼‰<br><small>å›è¡€èŒƒå›´ï¼š${min}-${max}</small>`;
      statusDisplay.textContent = `ä¹”å³°ï¼š${playerHealth}/100`;
      currentLevel.textContent = `ç¬¬ ${level} å…³`;
      updateEnemyStats();
      updateStatusColor();
    }

    function getEnemyAttackRange() {
      return [10, 11]; // æ•Œäººæ”»å‡»åŠ›å›ºå®š
    }

    function updateStatusColor() {
      if (playerHealth >= 75) {
        statusDisplay.style.color = "#5cfa5c"; // ç»¿è‰²
      } else if (playerHealth >= 50) {
        statusDisplay.style.color = "#ffcc00"; // æ©™è‰²
      } else {
        statusDisplay.style.color = "#ef4646"; // çº¢è‰²
      }
    }

    function updateEnemyStats() {
      const enemyName = badNames[level - 1];
      enemyBox.textContent = `${enemyName}ï¼š${enemyHealth}`;
      enemyStats.textContent = `æ•Œäººæˆ˜æ–—å€¼ï¼š10-11`;
    }

    document.addEventListener('keydown', function (event) {
      if (!isPlayerTurn || isGameOver) return;
      const action = keyMap[event.key];
      if (action) {
        if (action === 'high') {
          attack('high');
        } else if (action === 'heal') {
          heal();
        }
      }
    });

    function attack(type) {
      if (isGameOver) return;

      const [min, max] = getAttackRange();
      const damage = Math.floor(Math.random() * (max - min + 1)) + min;

      enemyHealth -= damage;
      result.textContent = `ä¹”å³°å‘åŠ¨äº†ã€Œé™é¾™åå…«æŒã€ï¼Œé€ æˆ${damage}ä¼¤å®³`;
      result.style.color = "green";

      enemyBox.textContent = `${enemyBox.textContent.split("ï¼š")[0]}ï¼š${enemyHealth}`;
      statusDisplay.textContent = `ä¹”å³°ï¼š${playerHealth}/100`;
      updateStatusColor();

      if (enemyHealth <= 0) {
        result.textContent = `ğŸ‰ ä¹”å³°ä¸€æŒåŠˆå‡ºï¼Œ${enemyBox.textContent.split("ï¼š")[0]}å€’åœ°ï¼`;
        if (level === 5) {
          result.textContent += `ä¹”å³°èƒœåˆ©ï¼æ±Ÿæ¹–ä¼ è¨€ï¼šä¹”å³°æ¨ªç©ºå‡ºä¸–ï¼Œé™é¾™åå…«æŒéœ‡å¤çƒä»Šï¼`;
          isGameOver = true;
        } else {
          result.textContent += `ä¹”å³°å‡è‡³ç¬¬${level + 1}å…³ï¼Œè¿æˆ˜æ–°æ•Œäººï¼`;
        }
        isGameOver = false;
        level++;
        if (level <= 5) {
          enemyHealth = 100 + (level - 1) * 20; // ç¬¬1å…³ä¸º100ï¼Œç¬¬2å…³ä¸º120ï¼Œä»¥æ­¤ç±»æ¨
        }

        updateEnemyStats();
        updateAttackButton();
        currentLevel.classList.add('flash');
        setTimeout(() => {
          currentLevel.classList.remove('flash');
        }, 500);
        setTimeout(() => {
          result.textContent = "";
          isPlayerTurn = true;
        }, 800);
        return;
      }

      setTimeout(() => {
        isPlayerTurn = false;
        enemyTurn();
      }, 500);
    }

    function heal() {
      if (isGameOver || !isPlayerTurn) return;

      const [min, max] = getAttackRange();
      const healAmount = Math.floor(Math.random() * (max - min + 1)) + min;

      if (playerHealth < 100) {
        playerHealth += healAmount;
        result.textContent = `ä¹”å³°è¿åŠŸå›è¡€ï¼Œæ¢å¤${healAmount}ç‚¹è¡€é‡`;
        result.style.color = "gold";
      } else {
        result.textContent = "ä¹”å³°è¡€é‡å·²æ»¡ï¼Œæ— æ³•å†å›è¡€ã€‚";
        result.style.color = "orange";
      }

      playerBox.textContent = `ä¹”å³°ï¼š${playerHealth}`;
      statusDisplay.textContent = `ä¹”å³°ï¼š${playerHealth}/100`;
      updateStatusColor();

      setTimeout(() => {
        isPlayerTurn = false;
        enemyTurn();
      }, 500);
    }

    function enemyTurn() {
      if (isGameOver) return;

      const [min, max] = getEnemyAttackRange();
      const enemyDamage = Math.floor(Math.random() * (max - min + 1)) + min;
      playerHealth -= enemyDamage;
      result.textContent = `æ•Œäººä½¿ç”¨ã€Œå¤©å±±æŠ˜æ¢…æ‰‹ã€ï¼Œé€ æˆ${enemyDamage}ä¼¤å®³`;
      result.style.color = "red";

      playerBox.textContent = `ä¹”å³°ï¼š${playerHealth}`;
      statusDisplay.textContent = `ä¹”å³°ï¼š${playerHealth}/100`;
      updateStatusColor();

      if (playerHealth <= 0) {
        result.textContent = "ä¹”å³°è¢«æ•Œäººå‡»è´¥ï¼æ¸¸æˆç»“æŸã€‚";
        result.style.color = "darkred";
        isGameOver = true;
        isPlayerTurn = false;
      } else {
        setTimeout(() => {
          isPlayerTurn = true;
        }, 800);
      }
    }

    function resetGame() {
      playerHealth = 100;
      enemyHealth = 100;
      isPlayerTurn = true;
      isGameOver = false;
      level = 1;
      updateUI();
      updateAttackButton();
      result.textContent = "";
      statusDisplay.textContent = "ä¹”å³°ï¼š100/100";
      updateStatusColor();
      updateEnemyStats();
    }

    function updateUI() {
      playerBox.textContent = `ä¹”å³°ï¼š${playerHealth}`;
      enemyBox.textContent = `${enemyBox.textContent.split("ï¼š")[0]}ï¼š${enemyHealth}`;
    }

    // åˆå§‹åŒ–æ¸¸æˆ
    resetGame();
  </script>
</body>
</html>